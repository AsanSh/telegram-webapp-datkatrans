<!DOCTYPE html>
<html>
<head>
    <title>DatkaTrans Portal</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', path='/css/style.css') }}">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <div class="header">
            <h1 class="welcome-text">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, <span id="username">...</span></h1>
        </div>

        <!-- Request Counter -->
        <div class="counter-section">
            <div class="counter-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞—è–≤–æ–∫</div>
            <div class="counter-amount" id="requests-count">2</div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button class="action-button add-button" onclick="showRequestForm()">
                <span class="action-icon">‚ûï</span>
                <span class="action-text">–î–æ–±–∞–≤–∏—Ç—å</span>
            </button>
            <button class="action-button edit-button">
                <span class="action-icon">‚úèÔ∏è</span>
                <span class="action-text">–ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</span>
            </button>
            <button class="action-button close-button">
                <span class="action-icon">‚úñÔ∏è</span>
                <span class="action-text">–ó–∞–∫—Ä—ã—Ç—å</span>
            </button>
            <button class="action-button analytics-button">
                <span class="action-icon">üìä</span>
                <span class="action-text">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</span>
            </button>
        </div>

        <!-- Request Form Modal -->
        <div id="requestFormModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞</h2>
                    <span class="close-modal" onclick="closeRequestForm()">&times;</span>
                </div>
                <form id="requestForm" onsubmit="handleRequestSubmit(event)">
                    <div class="form-group">
                        <label>–î–∞—Ç–∞ –∑–∞–∫—Ä—ã—Ç–∏—è</label>
                        <input type="date" name="closeDate" required>
                    </div>
                    <div class="form-group">
                        <label>–î–∞—Ç–∞ –æ—Ç–≥—Ä—É–∑–∫–∏</label>
                        <input type="date" name="shipmentDate" required>
                    </div>
                    <div class="form-group">
                        <label>–õ–æ–≥–∏—Å—Ç</label>
                        <input type="text" name="logistician" required>
                    </div>
                    <div class="form-group">
                        <label>–î–∞—Ç–∞ –≤—ã–≥—Ä—É–∑–∫–∏</label>
                        <input type="date" name="unloadingDate" required>
                    </div>
                    <div class="form-group">
                        <label>–§–ò–û –≤–æ–¥–∏—Ç–µ–ª—è</label>
                        <input type="text" name="driverName" required>
                    </div>
                    <div class="form-group">
                        <label>–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label>
                        <input type="tel" name="phoneNumber" required>
                    </div>
                    <div class="form-group">
                        <label>–¢–∏–ø –≥—Ä—É–∑–∞</label>
                        <input type="text" name="cargoType" required>
                    </div>
                    <div class="form-group">
                        <label>–ì–æ—Å–Ω–æ–º–µ—Ä –∞–≤—Ç–æ</label>
                        <input type="text" name="vehicleNumber" required>
                    </div>
                    <div class="form-group">
                        <label>–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</label>
                        <input type="text" name="direction" required>
                    </div>
                    <div class="form-group">
                        <label>–§—Ä–∞—Ö—Ç –Ω–∞–º</label>
                        <input type="number" name="ourFreight" required>
                    </div>
                    <div class="form-group">
                        <label>–§—Ä–∞—Ö—Ç –≤–æ–¥–∏—Ç–µ–ª—é</label>
                        <input type="number" name="driverFreight" required>
                    </div>
                    <div class="form-group">
                        <label>–ù–∞–ª–æ–≥</label>
                        <input type="number" name="tax" required>
                    </div>
                    <div class="form-group">
                        <label>–û—Ñ–∏—Å</label>
                        <input type="text" name="office" required>
                    </div>
                    <button type="submit" class="submit-button">–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É</button>
                </form>
            </div>
        </div>

        <!-- Active Requests List -->
        <div class="requests-list" id="requestsList">
            <div class="request-item">
                <div class="request-icon">üìù</div>
                <div class="request-info">
                    <div class="request-title">–ê–∫—Ç–∏–≤–Ω–∞—è –∑–∞—è–≤–∫–∞ #1</div>
                    <div class="request-details">–°—Ç–∞—Ç—É—Å: –í –æ–±—Ä–∞–±–æ—Ç–∫–µ</div>
                </div>
                <div class="request-time">12:30</div>
            </div>
            <div class="request-item">
                <div class="request-icon">üìù</div>
                <div class="request-info">
                    <div class="request-title">–ê–∫—Ç–∏–≤–Ω–∞—è –∑–∞—è–≤–∫–∞ #2</div>
                    <div class="request-details">–°—Ç–∞—Ç—É—Å: –ù–æ–≤–∞—è</div>
                </div>
                <div class="request-time">14:45</div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-item active">
                <span class="nav-icon">üìã</span>
                <span class="nav-text">–ó–∞—è–≤–∫–∏</span>
            </button>
            <button class="nav-item">
                <span class="nav-icon">üì§</span>
                <span class="nav-text">–í—ã–≥—Ä—É–∑–∫–∞</span>
            </button>
            <button class="nav-item">
                <span class="nav-icon">üîí</span>
                <span class="nav-text">–ó–∞–∫—Ä—ã—Ç–∏–µ</span>
            </button>
            <button class="nav-item">
                <span class="nav-icon">üìÖ</span>
                <span class="nav-text">–ò—Å—Ç–æ—Ä–∏—è</span>
            </button>
        </nav>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        const user = tg.initDataUnsafe.user || {};
        document.getElementById('username').textContent = user.first_name || "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ";

        // –ü—Ä–∏–º–µ—Ä –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö
        tg.onEvent('mainButtonClicked', function(){
            tg.sendData("Clicked!");
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', path='/js/main.js') }}"></script>
</body>
</html> 